{"ast":null,"code":"import _regeneratorRuntime from\"/home/boss/Desktop/crm/social/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/boss/Desktop/crm/social/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/boss/Desktop/crm/social/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./footer.css';import Share from'../share/Share';import Post from'../post/Post';import{useContext,useEffect,useState}from'react';import{AuthContext}from\"../../context/AuthContext\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Footer(_ref){var username=_ref.username;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useContext=useContext(AuthContext),user=_useContext.user;useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!username){_context.next=6;break;}_context.next=3;return axios.get(\"/posts/profile/\"+username);case 3:_context.t0=_context.sent;_context.next=9;break;case 6:_context.next=8;return axios.get(\"posts/timeline/\"+user._id);case 8:_context.t0=_context.sent;case 9:res=_context.t0;setPosts(res.data.sort(function(p1,p2){return new Date(p2.createdAt)-new Date(p1.createdAt);}));case 11:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref2.apply(this,arguments);};}();fetchPosts();},[username,user._id]);return/*#__PURE__*/_jsx(\"div\",{className:\"footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"footerWrapper\",children:[(!username||username===user.username)&&/*#__PURE__*/_jsx(Share,{}),posts.map(function(p){return/*#__PURE__*/_jsx(Post,{post:p},p._id);})]})});}","map":{"version":3,"sources":["/home/boss/Desktop/crm/social/client/src/components/footer/Footer.jsx"],"names":["Share","Post","useContext","useEffect","useState","AuthContext","axios","Footer","username","posts","setPosts","user","fetchPosts","get","_id","res","data","sort","p1","p2","Date","createdAt","map","p"],"mappings":"8cAAA,MAAO,cAAP,CAEA,MAAOA,CAAAA,KAAP,KAAmB,gBAAnB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,OAAQC,UAAR,CAAoBC,SAApB,CAA+BC,QAA/B,KAAgD,OAAhD,CACA,OAASC,WAAT,KAA4B,2BAA5B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAIA,cAAe,SAASC,CAAAA,MAAT,MAA8B,IAAZC,CAAAA,QAAY,MAAZA,QAAY,CACzC,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,gBAAiBR,UAAU,CAACG,WAAD,CAA3B,CAAQM,IAAR,aAAQA,IAAR,CAEAR,SAAS,CAAC,UAAM,CACd,GAAMS,CAAAA,UAAU,2FAAG,+IACLJ,QADK,+CAEPF,CAAAA,KAAK,CAACO,GAAN,CAAU,kBAAoBL,QAA9B,CAFO,qFAGPF,CAAAA,KAAK,CAACO,GAAN,CAAU,kBAAoBF,IAAI,CAACG,GAAnC,CAHO,yCACXC,GADW,aAIjBL,QAAQ,CACNK,GAAG,CAACC,IAAJ,CAASC,IAAT,CAAc,SAACC,EAAD,CAAKC,EAAL,CAAY,CACxB,MAAO,IAAIC,CAAAA,IAAJ,CAASD,EAAE,CAACE,SAAZ,EAAyB,GAAID,CAAAA,IAAJ,CAASF,EAAE,CAACG,SAAZ,CAAhC,CACD,CAFD,CADM,CAAR,CAJiB,uDAAH,kBAAVT,CAAAA,UAAU,2CAAhB,CAUAA,UAAU,GACX,CAZQ,CAYN,CAACJ,QAAD,CAAWG,IAAI,CAACG,GAAhB,CAZM,CAAT,CAcA,mBACE,YAAK,SAAS,CAAC,QAAf,uBACE,aAAK,SAAS,CAAC,eAAf,WACG,CAAC,CAACN,QAAD,EAAaA,QAAQ,GAAKG,IAAI,CAACH,QAAhC,gBAA6C,KAAC,KAAD,IADhD,CAEGC,KAAK,CAACa,GAAN,CAAU,SAACC,CAAD,qBACT,KAAC,IAAD,EAAkB,IAAI,CAAEA,CAAxB,EAAWA,CAAC,CAACT,GAAb,CADS,EAAV,CAFH,GADF,EADF,CAUD","sourcesContent":["import './footer.css'\n\nimport Share  from '../share/Share'\nimport Post from '../post/Post'\nimport {useContext, useEffect, useState  } from 'react';\nimport { AuthContext } from \"../../context/AuthContext\";\n\nimport axios from \"axios\"\n\n\n\nexport default function Footer({ username }) {\n    const [posts, setPosts] = useState([]);\n    const { user } = useContext(AuthContext);\n  \n    useEffect(() => {\n      const fetchPosts = async () => {\n        const res = username\n          ? await axios.get(\"/posts/profile/\" + username)\n          : await axios.get(\"posts/timeline/\" + user._id);\n        setPosts(\n          res.data.sort((p1, p2) => {\n            return new Date(p2.createdAt) - new Date(p1.createdAt);\n          })\n        );\n      };\n      fetchPosts();\n    }, [username, user._id]);\n  \n    return (\n      <div className=\"footer\">\n        <div className=\"footerWrapper\">\n          {(!username || username === user.username) && <Share />}\n          {posts.map((p) => (\n            <Post key={p._id} post={p} />\n          ))}\n        </div>\n      </div>\n    );\n  }\n  "]},"metadata":{},"sourceType":"module"}