{"ast":null,"code":"import _regeneratorRuntime from\"/home/boss/Desktop/crm/social/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/boss/Desktop/crm/social/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/boss/Desktop/crm/social/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./share.css';import{Cancel,PermMedia,Room,EmojiEmotions,Label}from'@mui/icons-material';// import logo from './person/autor.jpeg'\nimport{useContext,useRef,useState}from\"react\";import{AuthContext}from\"../../context/AuthContext\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Share(){var _useContext=useContext(AuthContext),user=_useContext.user;var PF=process.env.REACT_APP_PUBLIC_FOLDER;var desc=useRef();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),file=_useState2[0],setFile=_useState2[1];var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newPost,data,fileName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={userId:user._id,desc:desc.current.value};if(!file){_context.next=16;break;}data=new FormData();fileName=Date.now()+file.name;data.append(\"name\",fileName);data.append(\"file\",file);newPost.img=fileName;console.log(newPost);_context.prev=9;_context.next=12;return axios.post(\"/upload\",data);case 12:_context.next=16;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](9);case 16:_context.prev=16;_context.next=19;return axios.post(\"/posts\",newPost);case 19:window.location.reload();_context.next=24;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](16);case 24:case\"end\":return _context.stop();}}},_callee,null,[[9,14],[16,22]]);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"share\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"shareWrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareTop\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"shareProfileImg\",src:user.profilePicture?PF+user.profilePicture:PF+\"person/noAvatar.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"What's in your mind \"+user.username+\"?\",className:\"shareInput\",ref:desc})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"shareHr\"}),file&&/*#__PURE__*/_jsxs(\"div\",{className:\"shareImgContainer\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"shareImg\",src:URL.createObjectURL(file),alt:\"\"}),/*#__PURE__*/_jsx(Cancel,{className:\"shareCancelImg\",onClick:function onClick(){return setFile(null);}})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"shareBottom\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"shareOptions\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",className:\"shareOption\",children:[/*#__PURE__*/_jsx(PermMedia,{htmlColor:\"tomato\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Photo or Video\"}),/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},type:\"file\",id:\"file\",accept:\".png,.jpeg,.jpg\",onChange:function onChange(e){return setFile(e.target.files[0]);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Label,{htmlColor:\"blue\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Tag\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(Room,{htmlColor:\"green\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"shareOption\",children:[/*#__PURE__*/_jsx(EmojiEmotions,{htmlColor:\"goldenrod\",className:\"shareIcon\"}),/*#__PURE__*/_jsx(\"span\",{className:\"shareOptionText\",children:\"Feelings\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"shareButton\",type:\"submit\",children:\"Share\"})]})]})});}","map":{"version":3,"sources":["/home/boss/Desktop/crm/social/client/src/components/share/Share.jsx"],"names":["Cancel","PermMedia","Room","EmojiEmotions","Label","useContext","useRef","useState","AuthContext","axios","Share","user","PF","process","env","REACT_APP_PUBLIC_FOLDER","desc","file","setFile","submitHandler","e","preventDefault","newPost","userId","_id","current","value","data","FormData","fileName","Date","now","name","append","img","console","log","post","window","location","reload","profilePicture","username","URL","createObjectURL","display","target","files"],"mappings":"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","sourcesContent":["\nimport './share.css'\nimport {Cancel, PermMedia, Room, EmojiEmotions, Label} from '@mui/icons-material'\n// import logo from './person/autor.jpeg'\nimport { useContext, useRef, useState } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport axios from \"axios\";\n\n\nexport default function Share() {\n    const { user } = useContext(AuthContext);\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER;\n    const desc = useRef();\n    const [file, setFile] = useState(null);\n  \n    const submitHandler = async (e) => {\n      e.preventDefault();\n      const newPost = {\n        userId: user._id,\n        desc: desc.current.value,\n      };\n      if (file) {\n        const data = new FormData();\n        const fileName = Date.now() + file.name;\n        data.append(\"name\", fileName);\n        data.append(\"file\", file);\n        newPost.img = fileName;\n        console.log(newPost);\n        try {\n          await axios.post(\"/upload\", data);\n        } catch (err) {}\n      }\n      try {\n        await axios.post(\"/posts\", newPost);\n        window.location.reload();\n      } catch (err) {}\n    };\n  \n    return (\n      <div className=\"share\">\n        <div className=\"shareWrapper\">\n          <div className=\"shareTop\">\n            <img\n              className=\"shareProfileImg\"\n              src={user.profilePicture ? PF + user.profilePicture : PF + \"person/noAvatar.png\"}\n              alt=\"\"\n            />\n            <input\n              placeholder={\"What's in your mind \" + user.username + \"?\"}\n              className=\"shareInput\"\n              ref={desc}\n            />\n          </div>\n          <hr className=\"shareHr\" />\n          {file && (\n            <div className=\"shareImgContainer\">\n              <img className=\"shareImg\" src={URL.createObjectURL(file)} alt=\"\" />\n              <Cancel className=\"shareCancelImg\" onClick={() => setFile(null)} />\n            </div>\n          )}\n          <form className=\"shareBottom\" onSubmit={submitHandler}>\n            <div className=\"shareOptions\">\n              <label htmlFor=\"file\" className=\"shareOption\">\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Photo or Video</span>\n                <input\n                  style={{ display: \"none\" }}\n                  type=\"file\"\n                  id=\"file\"\n                  accept=\".png,.jpeg,.jpg\"\n                  onChange={(e) => setFile(e.target.files[0])}\n                />\n              </label>\n              <div className=\"shareOption\">\n                <Label htmlColor=\"blue\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Tag</span>\n              </div>\n              <div className=\"shareOption\">\n                <Room htmlColor=\"green\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Location</span>\n              </div>\n              <div className=\"shareOption\">\n                <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\n                <span className=\"shareOptionText\">Feelings</span>\n              </div>\n            </div>\n            <button className=\"shareButton\" type=\"submit\">\n              Share\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }"]},"metadata":{},"sourceType":"module"}